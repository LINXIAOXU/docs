(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{175:function(t,s,e){t.exports=e.p+"assets/img/install-ssl.8a40fa33.png"},290:function(t,s,e){t.exports=e.p+"assets/img/install-charles.d527609e.png"},291:function(t,s,e){t.exports=e.p+"assets/img/http-config.42be34c2.png"},292:function(t,s,e){t.exports=e.p+"assets/img/ssl-config.256b2c5b.png"},293:function(t,s,e){t.exports=e.p+"assets/img/ssl-status.075bee44.png"},294:function(t,s,e){t.exports=e.p+"assets/img/ssl-trust.cbb37f8c.png"},295:function(t,s,e){t.exports=e.p+"assets/img/android-config.d6031113.jpg"},296:function(t,s,e){t.exports=e.p+"assets/img/ssl-down.9cd27a4e.png"},297:function(t,s,e){t.exports=e.p+"assets/img/black-list-drop.9759096a.png"},298:function(t,s,e){t.exports=e.p+"assets/img/black-list-403.aa78cc85.png"},299:function(t,s,e){t.exports=e.p+"assets/img/del-query.5919ab4b.png"},300:function(t,s,e){t.exports=e.p+"assets/img/add-success.9a3e73bc.png"},301:function(t,s,e){t.exports=e.p+"assets/img/remove-list.49555f59.png"},302:function(t,s,e){t.exports=e.p+"assets/img/breakpoints-settings.e2fa86e3.png"},303:function(t,s,e){t.exports=e.p+"assets/img/edit-breakpoint.996c301f.png"},304:function(t,s,e){t.exports=e.p+"assets/img/breakpoint-page.806ff185.png"},305:function(t,s,e){t.exports=e.p+"assets/img/edit-response.bf7ab076.png"},306:function(t,s,e){t.exports=e.p+"assets/img/edit-mapping-response.db6683e6.png"},307:function(t,s,e){t.exports=e.p+"assets/img/edit-mapping-request.e467d70b.png"},308:function(t,s,e){t.exports=e.p+"assets/img/throttle-setting.94e6e38f.png"},309:function(t,s,e){t.exports=e.p+"assets/img/advanced-repeat.a0f1aef7.png"},310:function(t,s,e){t.exports=e.p+"assets/img/session.f4f0cb00.png"},350:function(t,s,e){"use strict";e.r(s);var a=e(6),r=Object(a.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"charles-抓包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#charles-抓包"}},[t._v("#")]),t._v(" Charles 抓包")]),t._v(" "),a("h2",{attrs:{id:"简介"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#简介"}},[t._v("#")]),t._v(" 简介")]),t._v(" "),a("p",[t._v("Charles是一款代理服务器，通过成功电脑或者浏览器的代理，然后截取请求和请求结果分析数据的目的。")]),t._v(" "),a("p",[t._v("在测试过程中，"),a("strong",[t._v("经常使用该抓包工具达到以下目的")]),t._v("：")]),t._v(" "),a("ol",[a("li",[t._v("获取数据分析缺陷的来源")]),t._v(" "),a("li",[a("strong",[t._v("模拟网络请求")]),t._v("：可选择已有的网络速度，也可手动编辑网速")]),t._v(" "),a("li",[t._v("模拟request请求数据、模拟response响应数据")]),t._v(" "),a("li",[t._v("黑名单：模拟请求超时、模拟请求返回404等")])]),t._v(" "),a("h2",{attrs:{id:"mscos下载安装-charles"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mscos下载安装-charles"}},[t._v("#")]),t._v(" mscOS下载安装 Charles")]),t._v(" "),a("ol",[a("li",[t._v("Charles官网下载安装包，下载成功后根据提示安装即可。\n"),a("a",{attrs:{href:"https://www.charlesproxy.com/download/",target:"_blank",rel:"noopener noreferrer"}},[t._v("官方网站"),a("OutboundLink")],1)])]),t._v(" "),a("p",[a("img",{attrs:{src:e(290),alt:"安装Charles"}})]),t._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[t._v("激活Charles")])]),t._v(" "),a("p",[t._v("Charles激活码:")]),t._v(" "),a("p",[t._v("Registered Name: https://zhile.io")]),t._v(" "),a("p",[t._v("License Key: 48891cf209c6d32bf4")]),t._v(" "),a("p",[t._v("激活步骤：\n打开Charles，help->Registered to xclient - Multi-Site License，输入账号和key提交破解成功就可以使用了")]),t._v(" "),a("h2",{attrs:{id:"http代理设置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#http代理设置"}},[t._v("#")]),t._v(" HTTP代理设置")]),t._v(" "),a("ol",[a("li",[t._v("设置PC端代理端口号\n在Proxy——>Proxying Settings——>点击add——>在弹出的对话框里面设置端口号：8888（也可更改，手机设置代理输入一致即可）,最后如图所示：")])]),t._v(" "),a("p",[a("img",{attrs:{src:e(291),alt:"设置PC端口号"}})]),t._v(" "),a("h2",{attrs:{id:"https代理配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#https代理配置"}},[t._v("#")]),t._v(" HTTPS代理配置")]),t._v(" "),a("ol",[a("li",[t._v("配置SSL访问\n在Proxy——>SSL Proxying Settings——>点击add——>在弹出的对话框里面设置主机host:*和端口号post:443——>勾选Enable SSL Proxying,最后如图所示：")])]),t._v(" "),a("p",[a("img",{attrs:{src:e(292),alt:"配置SSL访问"}})]),t._v(" "),a("h2",{attrs:{id:"ios使用步骤"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ios使用步骤"}},[t._v("#")]),t._v(" iOS使用步骤")]),t._v(" "),a("ol",[a("li",[t._v("打开charles后，要安装SSL证书：help——>SSL proxying——>Install Charles Root Certificate On a Mobile Device or Remote Browser，最后出现如图所示弹框：")])]),t._v(" "),a("p",[a("img",{attrs:{src:e(175),alt:"安装SSL证书"}})]),t._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[t._v("iOS端手机可根据第二步的弹窗更改手机端的设置：即点开wifi旁边的感叹号——>点击配置代理——>选择手动——>填入服务器号，即本机IP地址，端口号：8888（一般默认8888）——>点击存储——>再在safari浏览器网址栏输chls.pro/ssl——>点击安装，最后证书状态显示已验证如图所示：")])]),t._v(" "),a("img",{attrs:{src:e(293),width:"30%"}}),t._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[t._v("继续iOS手机端设置：通用——>关于本机——>证书信任设置——>选择信任刚刚下载的SSL证书，最后如图所示：")])]),t._v(" "),a("p",[t._v("[注]：手机和电脑必须处在同一个局域网内，也就是必须连接同一个wife")]),t._v(" "),a("img",{attrs:{src:e(294),width:"30%"}}),t._v(" "),a("h2",{attrs:{id:"android使用步骤"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#android使用步骤"}},[t._v("#")]),t._v(" Android使用步骤")]),t._v(" "),a("ol",[a("li",[t._v("打开charles后，要安装SSL证书：help——>SSL proxying——>Install Charles Root Certificate On a Mobile Device or Remote Browser，最后出现如图所示弹框：")])]),t._v(" "),a("p",[a("img",{attrs:{src:e(175),alt:"安装SSL证书"}})]),t._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[t._v("设置-WLAN，进入已连接WiFi手动设置（端口需与PC端设置端口号一致）")])]),t._v(" "),a("p",[t._v("[注]不同安卓手机弹出设置代理入口不同，如果进入网络详情页无代理项，可在WLAN列表长按wifi名称弹出代理设置")]),t._v(" "),a("img",{attrs:{src:e(295),width:"30%"}}),t._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[t._v("在浏览器网址栏输chls.pro/ssl——>证书下载成功后，进入设置-更多设置-系统安全-从存储的设备安装页面，查看已下载的证书，选择证书安装，输入证书名称，证书命名可随意填写，确定后安装成功！如图所示：")])]),t._v(" "),a("p",[t._v("[注]：手机和电脑必须处在同一个局域网内，也就是必须连接同一个wife")]),t._v(" "),a("img",{attrs:{src:e(296),width:"30%"}}),t._v(" "),a("h2",{attrs:{id:"设置黑名单"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置黑名单"}},[t._v("#")]),t._v(" 设置黑名单")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("选择需要加入黑名单的请求，鼠标点击右键--选择black list即添加成功")])]),t._v(" "),a("li",[a("p",[t._v("查看和修改已加入黑名单的请求：菜单路径tools-black list；一般测试过程中用来模拟请求超时(Drop conneciton)或者返回403(Return 403 response)")])])]),t._v(" "),a("img",{attrs:{src:e(297),width:"30%"}}),t._v(" "),a("img",{attrs:{src:e(298),width:"30%"}}),t._v(" "),a("p",[t._v("[注]：双击请求，将query删除")]),t._v(" "),a("img",{attrs:{src:e(299),width:"30%"}}),t._v(" "),a("p",[t._v("当黑名单添加成功后，对其进行抓取，如图")]),t._v(" "),a("p",[a("img",{attrs:{src:e(300),alt:"添加黑名单"}})]),t._v(" "),a("p",[t._v("将黑名单去除后，对其进行抓取，为200，如图")]),t._v(" "),a("p",[a("img",{attrs:{src:e(301),alt:"去除黑名单"}})]),t._v(" "),a("h2",{attrs:{id:"设置断点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置断点"}},[t._v("#")]),t._v(" 设置断点")]),t._v(" "),a("p",[t._v("设置断点，可以修改请求的request数据，也可以修改response响应数据。")]),t._v(" "),a("p",[t._v("目前使用fiddler发现设置断点，该工具有的返回格式不是json，导致客户端不会展示。使用Charles工具，可以避免该问题，具体操作如下")]),t._v(" "),a("ol",[a("li",[t._v("对要打断点的接口右键，选择「Breakpoints」，添加到断点列表后，进入proxy-Breakpoints settings(手动编辑断点内容)设置断点的类型")])]),t._v(" "),a("p",[t._v("断点类型分为：request断点、response断点")]),t._v(" "),a("img",{attrs:{src:e(302),width:"30%"}}),t._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[a("p",[t._v("双击Location中的想要打断点的接口，弹出Edit Breakpoints")])]),t._v(" "),a("li",[a("p",[t._v("将Query中的内容删除，输入*")])])]),t._v(" "),a("p",[t._v("如果修改Request数据，就将Request勾选")]),t._v(" "),a("p",[t._v("如果修改Response数据，就将Response勾选")]),t._v(" "),a("img",{attrs:{src:e(303),width:"30%"}}),t._v(" "),a("ol",{attrs:{start:"4"}},[a("li",[t._v("此时重新访问该接口，Charles自动跳转到Breakpoints页面")])]),t._v(" "),a("img",{attrs:{src:e(304),width:"30%"}}),t._v(" "),a("ol",{attrs:{start:"5"}},[a("li",[t._v("此时修改Response数据，点击Edit Response，切换底部tab至JSON，修改所需要的数据")])]),t._v(" "),a("img",{attrs:{src:e(305),width:"100%"}}),t._v(" "),a("ol",{attrs:{start:"6"}},[a("li",[a("p",[t._v("修改数据后，点击Execute，查看访问的页面，数据将会显示已修改的Response数据")])]),t._v(" "),a("li",[a("p",[t._v("自动将指定的响应(response)数据改为固定返回值")])])]),t._v(" "),a("p",[t._v("1）选择该网络请求->鼠标右键Save Response...")]),t._v(" "),a("p",[t._v("2）如果该请求返回一个json串，保存文件时需要保存21006.json")]),t._v(" "),a("p",[t._v("3）需要更改请求，点击右键Map Local...指定到本地保存的21006.json")]),t._v(" "),a("img",{attrs:{src:e(306),width:"30%"}}),t._v(" "),a("p",[t._v("4）通过在本地更改21006.json就可以自动更改请求的返回值。避免每次使用时修改breakpoints中的返回值，提高效率")]),t._v(" "),a("ol",{attrs:{start:"8"}},[a("li",[t._v("自动将制定的请求(request)数据改为固定返回值")])]),t._v(" "),a("p",[t._v("1）选择该网络请求->鼠标右键Map Remove...，请求添加成功后")]),t._v(" "),a("p",[t._v("2）将编辑好的响应数据填充在编辑框的下半部分，如下图")]),t._v(" "),a("img",{attrs:{src:e(307),width:"30%"}}),t._v(" "),a("p",[t._v("按上诉操作成功后，再次发起该请求，会自动使用已设置好的请求数据")]),t._v(" "),a("h2",{attrs:{id:"设置网速"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置网速"}},[t._v("#")]),t._v(" 设置网速")]),t._v(" "),a("p",[t._v("菜单路径：proxy-throttle settings ，勾选enable throttling 启动限速")]),t._v(" "),a("img",{attrs:{src:e(308),width:"30%"}}),t._v(" "),a("p",[t._v("根据以上设置成功后，接下来测试过程中发起的请求都会在该网络下运行。该功能主要用在模拟不同网速下的请求场景，例如：模拟弱网请求")]),t._v(" "),a("h2",{attrs:{id:"压测-重复发送请求"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#压测-重复发送请求"}},[t._v("#")]),t._v(" 压测/重复发送请求")]),t._v(" "),a("p",[t._v("菜单路径：tools-Advanced Repeat...，也可以在控制台上选择某个请求，然后鼠标右键打开菜单，选择Repeat advance...，打开Repeat advance的设置窗口如下：")]),t._v(" "),a("img",{attrs:{src:e(309),width:"30%"}}),t._v(" "),a("ol",[a("li",[t._v("Iterations：重复次数")]),t._v(" "),a("li",[t._v("Consurrency：并发")]),t._v(" "),a("li",[t._v("Repeat delay(ms)：重复延迟间隔")])]),t._v(" "),a("p",[t._v("设置重复参数后，点击OK会打开新的session进行压力测试，压力测试结果如下")]),t._v(" "),a("img",{attrs:{src:e(310),width:"100%"}})])}),[],!1,null,null,null);s.default=r.exports}}]);