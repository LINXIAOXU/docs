<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>sed命令 | 个人文档</title>
    <meta name="generator" content="VuePress 1.5.2">
    
    <meta name="description" content="">
    <link rel="preload" href="/qa-docs/assets/css/0.styles.f43b2e62.css" as="style"><link rel="preload" href="/qa-docs/assets/js/app.2bd587af.js" as="script"><link rel="preload" href="/qa-docs/assets/js/2.55548560.js" as="script"><link rel="preload" href="/qa-docs/assets/js/27.21c1eb49.js" as="script"><link rel="prefetch" href="/qa-docs/assets/js/10.32725041.js"><link rel="prefetch" href="/qa-docs/assets/js/11.bbf50494.js"><link rel="prefetch" href="/qa-docs/assets/js/12.2a726b15.js"><link rel="prefetch" href="/qa-docs/assets/js/13.9b186a30.js"><link rel="prefetch" href="/qa-docs/assets/js/14.46605d23.js"><link rel="prefetch" href="/qa-docs/assets/js/15.4601782d.js"><link rel="prefetch" href="/qa-docs/assets/js/16.298fb897.js"><link rel="prefetch" href="/qa-docs/assets/js/17.81f10f93.js"><link rel="prefetch" href="/qa-docs/assets/js/18.ceaab69b.js"><link rel="prefetch" href="/qa-docs/assets/js/19.849d893d.js"><link rel="prefetch" href="/qa-docs/assets/js/20.43affe03.js"><link rel="prefetch" href="/qa-docs/assets/js/21.88f41ed7.js"><link rel="prefetch" href="/qa-docs/assets/js/22.8f2279ab.js"><link rel="prefetch" href="/qa-docs/assets/js/23.8237b5dd.js"><link rel="prefetch" href="/qa-docs/assets/js/24.0ce42693.js"><link rel="prefetch" href="/qa-docs/assets/js/25.a3d8170f.js"><link rel="prefetch" href="/qa-docs/assets/js/26.55ac7813.js"><link rel="prefetch" href="/qa-docs/assets/js/28.2cd0c907.js"><link rel="prefetch" href="/qa-docs/assets/js/29.319b3c73.js"><link rel="prefetch" href="/qa-docs/assets/js/3.43cd6a97.js"><link rel="prefetch" href="/qa-docs/assets/js/30.d123c4e7.js"><link rel="prefetch" href="/qa-docs/assets/js/31.6dca4b70.js"><link rel="prefetch" href="/qa-docs/assets/js/32.aa9225d2.js"><link rel="prefetch" href="/qa-docs/assets/js/33.014ee765.js"><link rel="prefetch" href="/qa-docs/assets/js/34.76409d0b.js"><link rel="prefetch" href="/qa-docs/assets/js/35.1bde1443.js"><link rel="prefetch" href="/qa-docs/assets/js/36.9499315a.js"><link rel="prefetch" href="/qa-docs/assets/js/37.d127a34f.js"><link rel="prefetch" href="/qa-docs/assets/js/38.1d0aa752.js"><link rel="prefetch" href="/qa-docs/assets/js/4.4bfa328b.js"><link rel="prefetch" href="/qa-docs/assets/js/5.75acb701.js"><link rel="prefetch" href="/qa-docs/assets/js/6.c6ebb175.js"><link rel="prefetch" href="/qa-docs/assets/js/7.0458a7d1.js"><link rel="prefetch" href="/qa-docs/assets/js/8.80656290.js"><link rel="prefetch" href="/qa-docs/assets/js/9.70f96fc6.js">
    <link rel="stylesheet" href="/qa-docs/assets/css/0.styles.f43b2e62.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/qa-docs/" class="home-link router-link-active"><!----> <span class="site-name">个人文档</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="分类" class="dropdown-title"><span class="title">分类</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/qa-docs/others/vuepress.html" class="nav-link">
  零碎知识
</a></li><li class="dropdown-item"><!----> <a href="/qa-docs/base/test-definition.html" class="nav-link">
  测试基础
</a></li><li class="dropdown-item"><!----> <a href="/qa-docs/code/mocha.html" class="nav-link">
  代码学习
</a></li><li class="dropdown-item"><!----> <a href="/qa-docs/linux/other.html" class="nav-link">
  Linux学习
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="分类" class="dropdown-title"><span class="title">分类</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/qa-docs/others/vuepress.html" class="nav-link">
  零碎知识
</a></li><li class="dropdown-item"><!----> <a href="/qa-docs/base/test-definition.html" class="nav-link">
  测试基础
</a></li><li class="dropdown-item"><!----> <a href="/qa-docs/code/mocha.html" class="nav-link">
  代码学习
</a></li><li class="dropdown-item"><!----> <a href="/qa-docs/linux/other.html" class="nav-link">
  Linux学习
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>零碎知识</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>测试基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>代码学习</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Linux学习</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/qa-docs/linux/other.html" class="sidebar-link">Linux命令行</a></li><li><a href="/qa-docs/linux/find.html" class="sidebar-link">find命令</a></li><li><a href="/qa-docs/linux/grep.html" class="sidebar-link">grep命令</a></li><li><a href="/qa-docs/linux/awk.html" class="sidebar-link">awk命令</a></li><li><a href="/qa-docs/linux/sed.html" aria-current="page" class="active sidebar-link">sed命令</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/qa-docs/linux/sed.html#基本用法" class="sidebar-link">基本用法</a></li><li class="sidebar-sub-header"><a href="/qa-docs/linux/sed.html#删除d命令" class="sidebar-link">删除d命令</a></li><li class="sidebar-sub-header"><a href="/qa-docs/linux/sed.html#整行替换：c命令" class="sidebar-link">整行替换：c命令</a></li><li class="sidebar-sub-header"><a href="/qa-docs/linux/sed.html#字符串替换：s命令" class="sidebar-link">字符串替换：s命令</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>读书笔记</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="sed命令"><a href="#sed命令" class="header-anchor">#</a> sed命令</h1> <p><strong>SED是一项Linux指令，功能同awk类似，差别在于，sed简单，对列处理的功能要差一些，awk的功能复杂，对列处理的功能比较强大。</strong></p> <p>sed叫做流编辑器，在shell脚本和Makefile中作为过滤一使用非常普遍，也就是把前一个程序的输出引入sed的输入，经过一系列编辑命令转换成为另一种格式输出。sed是一种在线编辑器，它一次处理一行内容，处理时，把当前处理的行存储在临时缓冲区中，称为&quot;模式空间&quot;,接着用sed命令处理缓冲区中的内容，处理完成后，把缓冲区的内容送往屏幕。接着处理下一行，这样不断重复，直到文件末尾。文件内容并没有改变，除非你使用重定向存储输出。</p> <h2 id="基本用法"><a href="#基本用法" class="header-anchor">#</a> 基本用法</h2> <table><thead><tr><th>选项名</th> <th>作用</th></tr></thead> <tbody><tr><td>-n</td> <td>一般sed命令会把所有数据都输出到屏幕，如果加入-n选项的话，则只会把经过sed命令处理的行输出到屏幕。</td></tr> <tr><td>-e</td> <td>允许对输入数据应用多条sed命令编辑。</td></tr> <tr><td>-f</td> <td>从脚本文件中读取命令（sed操作可以事先写入脚本，然后通过-f读取并执行）</td></tr> <tr><td>-i</td> <td>用sed的修改结果直接修改读取数据的文件，而不是由屏幕输出。</td></tr> <tr><td>-l</td> <td>指定行的长度</td></tr> <tr><td>-r</td> <td>在脚本中使用扩展表达式</td></tr></tbody></table> <table><thead><tr><th>动作</th> <th>作用</th></tr></thead> <tbody><tr><td>d</td> <td>删除。</td></tr> <tr><td>a</td> <td>追加，在当前行后添加一行或多行。</td></tr> <tr><td>c</td> <td>行替换，用c后面的字符串替换原数据行。</td></tr> <tr><td>i</td> <td>插入，在当前行前插入一行或多行。</td></tr> <tr><td>p</td> <td>打印，输出指定的行。</td></tr> <tr><td>s</td> <td>字符串替换，用一个字符串替换另外一个字符串。格式为'行范围s/旧字符串/新字符串/g'</td></tr></tbody></table> <h2 id="删除d命令"><a href="#删除d命令" class="header-anchor">#</a> 删除d命令</h2> <div class="language- extra-class"><pre class="language-text"><code>sed 'd' sed.txt   	 		-----删除sed.txt文件的所有内容。
sed '2d' sed.txt   	 		-----删除sed.txt文件的第二行。
sed '2,$d' sed.txt	 		-----删除sed.txt文件的第二行到末尾所有行。
sed '$d' sed.txt	 		-----删除sed.txt文件的最后一行。
sed '/test/d ' sed.txt		-----删除sed.txt文件所有包含test的行。
sed '/[A-Za-z]/d ' sed.txt	-----删除sed.txt文件所有包含字母的行。
</code></pre></div><h2 id="整行替换：c命令"><a href="#整行替换：c命令" class="header-anchor">#</a> 整行替换：c命令</h2> <div class="language- extra-class"><pre class="language-text"><code>sed '2c hello world' sed.txt    -----将第二行替换成hello world
</code></pre></div><h2 id="字符串替换：s命令"><a href="#字符串替换：s命令" class="header-anchor">#</a> 字符串替换：s命令</h2> <div class="language- extra-class"><pre class="language-text"><code>sed 's/hello/hi/2' sed.txt                        -----此种写法表示只替换每行的第2个hello为hi
sed '2s/hello/hi/2' sed.txt                       -----此种写法表示只替换第二行的第2个hello为hi
sed '$s/hello/hi/2' sed.txt                       -----此种写法表示只替换最后一行的第2个hello为hi
sed 's/hello/hi/2g' sed.txt                       -----此种写法表示只替换每行的第2个以后的hello为hi（包括第2个）
sed -n 's/^hello/hi/p' sed.txt			          -----(-n)选项和p标志一起使用表示只打印那些发生替换的行。也就是说，如果某一行开头的hello被替换成hi，就打印它。
sed -n '2,4p' sed.txt                             -----打印输出sed.txt中的第2行和第4行

sed -n 's/hello/&amp;-hi/gp' sed.txt
sed 's/^192.168.0.1/&amp;-localhost/' sed.txt	
sed 's/^192.168.0.1/[&amp;]/' sed.txt	
##  &amp;符号表示追加一个串到找到的串后。所有以192.168.0.1开头的行都会被替换成它自已加 -localhost，变成192.168.0.1-localhost。第三句表示给IP地址添加中括号

sed -n 's/\(liu\)jialing/\1tao/p' sed.txt
sed -n 's/\(liu\)jia\(ling\)/\1tao\2ss/p' sed.txt
##  liu被标记为\1，所以liu会被保留下来（\1 == liu）
##  ling被标记为\2，所以ling也会被保留下来（\2 == ling）
##  所以最后的结果就是\1tao\2ss == &quot;liu&quot; + &quot;tao&quot; + &quot;ling&quot; + &quot;ss&quot;
此处切记：\1代表的是被第一个()包含的内容，\1代表的是被第一个()包含的内容，……
上面命令的意思就是：被括号包含的字符串会保留下来，然后跟其他的字符串比如tao和ss组成新的字符串liutaolingss

sed 's#hello#hi#g' sed.txt
##  不论什么字符，紧跟着s命令的都被认为是新的分隔符，所以，&quot;#&quot;在这里是分隔符，代替了默认的&quot;/&quot;分隔符。表示把所有hello替换成hi。
选定行的范围：逗号

sed -n '/today/,/hello/p' sed.txt
## 所有在模板today和hello所确定的范围内的行都被打印。都找第一个，也就是说，从第一个today到第一个hello

sed -n '5,/^hello/p' sed.txt
sed -n '/^hello/,8p' sed.txt
## 打印从第五行开始到第一个包含以hello开始的行之间的所有行。

sed '/today/,/hello/s/$/www/' sed.txt
## 对于模板today和hello之间的行，每行的末尾用字符串www替换。
sed '/today/,/hello/s/^/www/' sed.txt
## 对于模板today和hello之间的行，每行的开头用字符串www替换。

sed '/^[A-Za-z]/s/5/five/g' sed.txt
## 将以字母开头的行中的数字5替换成five
</code></pre></div><ol><li><a href="https://www.jianshu.com/p/89163e927a2c" target="_blank" rel="noopener noreferrer">https://www.jianshu.com/p/89163e927a2c<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ol></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次编辑时间:</span> <span class="time">7/2/2020, 3:30:54 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/qa-docs/linux/awk.html" class="prev">
        awk命令
      </a></span> <span class="next"><a href="/qa-docs/notes/2021-03.html">
        2021年3月份
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/qa-docs/assets/js/app.2bd587af.js" defer></script><script src="/qa-docs/assets/js/2.55548560.js" defer></script><script src="/qa-docs/assets/js/27.21c1eb49.js" defer></script>
  </body>
</html>
