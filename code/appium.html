<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Appium基础 | 个人文档</title>
    <meta name="generator" content="VuePress 1.5.2">
    
    <meta name="description" content="">
    <link rel="preload" href="/qa-docs/assets/css/0.styles.30c23280.css" as="style"><link rel="preload" href="/qa-docs/assets/js/app.8d0fa31b.js" as="script"><link rel="preload" href="/qa-docs/assets/js/3.d8df636e.js" as="script"><link rel="preload" href="/qa-docs/assets/js/6.53acc426.js" as="script"><link rel="prefetch" href="/qa-docs/assets/js/10.9c349b89.js"><link rel="prefetch" href="/qa-docs/assets/js/11.a8aeaff6.js"><link rel="prefetch" href="/qa-docs/assets/js/12.741e948f.js"><link rel="prefetch" href="/qa-docs/assets/js/13.ff627ee2.js"><link rel="prefetch" href="/qa-docs/assets/js/14.56df8021.js"><link rel="prefetch" href="/qa-docs/assets/js/15.fd59d6a2.js"><link rel="prefetch" href="/qa-docs/assets/js/16.4d734805.js"><link rel="prefetch" href="/qa-docs/assets/js/17.d6f98694.js"><link rel="prefetch" href="/qa-docs/assets/js/18.5d623092.js"><link rel="prefetch" href="/qa-docs/assets/js/19.1ef1693b.js"><link rel="prefetch" href="/qa-docs/assets/js/2.cc1ee76d.js"><link rel="prefetch" href="/qa-docs/assets/js/20.17e6bc00.js"><link rel="prefetch" href="/qa-docs/assets/js/21.2da93537.js"><link rel="prefetch" href="/qa-docs/assets/js/22.c915c9e1.js"><link rel="prefetch" href="/qa-docs/assets/js/23.46a6636c.js"><link rel="prefetch" href="/qa-docs/assets/js/24.1d117ca5.js"><link rel="prefetch" href="/qa-docs/assets/js/25.36be0af2.js"><link rel="prefetch" href="/qa-docs/assets/js/26.0bb71420.js"><link rel="prefetch" href="/qa-docs/assets/js/27.c7744104.js"><link rel="prefetch" href="/qa-docs/assets/js/28.6cb445d2.js"><link rel="prefetch" href="/qa-docs/assets/js/29.e836fc08.js"><link rel="prefetch" href="/qa-docs/assets/js/30.f54bb6ea.js"><link rel="prefetch" href="/qa-docs/assets/js/31.ccbfd933.js"><link rel="prefetch" href="/qa-docs/assets/js/32.07150977.js"><link rel="prefetch" href="/qa-docs/assets/js/33.894629ea.js"><link rel="prefetch" href="/qa-docs/assets/js/34.5fb00fee.js"><link rel="prefetch" href="/qa-docs/assets/js/35.46dd1deb.js"><link rel="prefetch" href="/qa-docs/assets/js/36.2a7ef759.js"><link rel="prefetch" href="/qa-docs/assets/js/37.a7703132.js"><link rel="prefetch" href="/qa-docs/assets/js/38.184f2f7b.js"><link rel="prefetch" href="/qa-docs/assets/js/39.66991850.js"><link rel="prefetch" href="/qa-docs/assets/js/4.7d1b1b70.js"><link rel="prefetch" href="/qa-docs/assets/js/40.7de47fbd.js"><link rel="prefetch" href="/qa-docs/assets/js/41.b81fdd2f.js"><link rel="prefetch" href="/qa-docs/assets/js/42.b040d113.js"><link rel="prefetch" href="/qa-docs/assets/js/43.be1ad23f.js"><link rel="prefetch" href="/qa-docs/assets/js/44.75ebac87.js"><link rel="prefetch" href="/qa-docs/assets/js/45.31f7e820.js"><link rel="prefetch" href="/qa-docs/assets/js/46.f732f4e5.js"><link rel="prefetch" href="/qa-docs/assets/js/5.6e29385f.js"><link rel="prefetch" href="/qa-docs/assets/js/7.8e3635d6.js"><link rel="prefetch" href="/qa-docs/assets/js/8.383fddd5.js"><link rel="prefetch" href="/qa-docs/assets/js/9.abf996f7.js">
    <link rel="stylesheet" href="/qa-docs/assets/css/0.styles.30c23280.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/qa-docs/" class="home-link router-link-active"><!----> <span class="site-name">个人文档</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="分类" class="dropdown-title"><span class="title">分类</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/qa-docs/others/vuepress.html" class="nav-link">
  零碎知识
</a></li><li class="dropdown-item"><!----> <a href="/qa-docs/base/test-definition.html" class="nav-link">
  测试基础
</a></li><li class="dropdown-item"><!----> <a href="/qa-docs/code/mocha.html" class="nav-link">
  代码学习
</a></li><li class="dropdown-item"><!----> <a href="/qa-docs/linux/other.html" class="nav-link">
  Linux学习
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="分类" class="dropdown-title"><span class="title">分类</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/qa-docs/others/vuepress.html" class="nav-link">
  零碎知识
</a></li><li class="dropdown-item"><!----> <a href="/qa-docs/base/test-definition.html" class="nav-link">
  测试基础
</a></li><li class="dropdown-item"><!----> <a href="/qa-docs/code/mocha.html" class="nav-link">
  代码学习
</a></li><li class="dropdown-item"><!----> <a href="/qa-docs/linux/other.html" class="nav-link">
  Linux学习
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>零碎知识</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>测试基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>代码学习</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/qa-docs/code/monkey.html" class="sidebar-link">Monkey文档</a></li><li><a href="/qa-docs/code/appium.html" aria-current="page" class="active sidebar-link">Appium基础</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/qa-docs/code/appium.html#一-appium简介" class="sidebar-link">一. Appium简介</a></li><li class="sidebar-sub-header"><a href="/qa-docs/code/appium.html#二-appium架构原理" class="sidebar-link">二. Appium架构原理</a></li><li class="sidebar-sub-header"><a href="/qa-docs/code/appium.html#三-appium环境搭建" class="sidebar-link">三. Appium环境搭建</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/qa-docs/code/appium.html#_3-1-mac平台基于python的appium环境搭建" class="sidebar-link">3.1 MAC平台基于Python的Appium环境搭建</a></li><li class="sidebar-sub-header"><a href="/qa-docs/code/appium.html#_3-2-windows平台基于python的appium环境搭建" class="sidebar-link">3.2 Windows平台基于Python的Appium环境搭建</a></li></ul></li><li class="sidebar-sub-header"><a href="/qa-docs/code/appium.html#二-连接android系统" class="sidebar-link">二. 连接Android系统</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/qa-docs/code/appium.html#_2-1-将appium与android进行通信连接" class="sidebar-link">2.1 将Appium与Android进行通信连接</a></li></ul></li></ul></li><li><a href="/qa-docs/code/python.html" class="sidebar-link">Python 基础</a></li><li><a href="/qa-docs/code/python-interface.html" class="sidebar-link">python 接口测试</a></li><li><a href="/qa-docs/code/selenium.html" class="sidebar-link">Selenium WebDriver 框架</a></li><li><a href="/qa-docs/code/chrome-extend.html" class="sidebar-link">chrome扩展+webpack自动打包</a></li><li><a href="/qa-docs/code/mocha.html" class="sidebar-link">MOCHA 测试框架</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Linux学习</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>读书笔记</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="appium基础"><a href="#appium基础" class="header-anchor">#</a> Appium基础</h1> <h2 id="一-appium简介"><a href="#一-appium简介" class="header-anchor">#</a> 一. Appium简介</h2> <p>Appium 是一个开源工具，用于自动化 iOS 手机、 Android 手机和 Windows 桌面平台上的原生、移动 Web 和混合应用。Appium 支持 iOS 上的 Safari 、Chrome 和 Android 上的内置浏览器。重要的是，Appium 是跨平台的：它允许你用同样的 API 对多平台（iOS、Android、Windows）写测试。做到在 iOS、Android 和 Windows 测试套件之间复用代码。<a href="http://appium.io/docs/cn/about-appium/intro/" target="_blank" rel="noopener noreferrer">教程<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="二-appium架构原理"><a href="#二-appium架构原理" class="header-anchor">#</a> 二. Appium架构原理</h2> <p>Appium的架构原理如图6-2所示，由客户端（Appium Client）和服务器（AppiumServer）两部分组成，客户端与服务器端通过JSON Wire Protocol进行通信。</p> <p><img src="/qa-docs/assets/img/appium.579c49d3.png" alt="appium原理图"></p> <ol><li>Appium服务器：Appium服务器是Appium框架的核心。它是一个基于Node.js实现的HTTP服务器。Appium服务器的主要功能是接受从Appium客户端发起的连接，监听从客户端发送来的命令，将命令发送给bootstrap.jar（iOS手机为bootstrap.js）执行，并将命令的执行结果通过HTTP应答反馈给Appium客户端。</li> <li>Bootstrap.jar：Bootstrap.jar是在Android手机上运行的一个应用程序，它在手机上扮演TCP服务器的角色。当Appium服务器需要运行命令时，Appium服务器会与Bootstrap. jar建立TCP通信，并把命令发送给Bootstrap.jar; Bootstrap.jar负责运行测试命令。</li> <li>Appium客户端：它主要是指实现了Appium功能的WebDriver协议的客户端Library，它负责与Appium服务器建立连接，并将测试脚本的指令发送到Appium服务器。现有的客户端Library有多种语言的实现，包括Ruby、Python、Java、JavaScript（Node. js）、Object C、PHP和C#。Appium的测试是在这些Library的基础上进行开发的。</li> <li>Session：Appium的客户端和服务端之间进行通信都必须在一个Session的上下文中进行。客户端在发起通信的时候首先会发送一个叫作「预期能力（Desired Capabilities）」的JSON对象给服务器。服务器收到该数据后，会创建一个session并将session的ID返回到客户端。之后客户端可以用该session的ID发送后续的命令。</li> <li>Desired Capabilities：Desired Capabilities是一组设置的键值对的集合，其中键对应设置的名称，而值对应设置的值。Desired Capabilities主要用于通知Appium服务器建立需要的Session，其中一些设置可以在Appium运行过程中改变Appium服务器的运行行为。</li> <li>Appium Desktop：这有一个 Appium 服务器的图形界面封装可以下载，它适用于任何平台。它打包了 Appium 服务器运行需要的所有东西，所以你不需要为 Node 而烦恼。它们还提供一个 Inspector 使你可以查看应用程序的层级结构。这在写测试时可以派上用场。</li></ol> <p>Appium在Android上基于UIAutomator实现了测试的代理程序（Bootstrap.jar），在iOS上基于UIAutomation实现了测试的代理程序（Bootstrap.js）。当测试脚本运行时，每行WebDriver的脚本都将转换成Appium的指令发送给Appium服务器，而Appium服务器将测试指令交给代理程序，将由代理程序负责执行测试。比如脚本上的一个点击操作，在Appium服务器上都是touch指令，当指令发送到Android系统上时，Android系统上的Bootstrap.jar将调用UIAutomator的方法实现点击操作；而当指令发送到iOS系统上时，iOS的Bootstrap.js将调用UIAutomation的方法实现点击操作。由于Appium有了这样的能力，同样的测试脚本可以实现跨平台运行。</p> <h2 id="三-appium环境搭建"><a href="#三-appium环境搭建" class="header-anchor">#</a> 三. Appium环境搭建</h2> <p>安装Appium有两种方式，一种是通过npm安装appium的服务端，一种是通过Appium Desktop，下列是通过Appium Desktop</p> <h3 id="_3-1-mac平台基于python的appium环境搭建"><a href="#_3-1-mac平台基于python的appium环境搭建" class="header-anchor">#</a> 3.1 MAC平台基于Python的Appium环境搭建</h3> <p><strong>3.1.1 mac下搭建jdk</strong></p> <ol><li>去官网下载并按平时的方法双击dmg文件，根据提示安装完成–<a href="https://www.oracle.com/cn/java/technologies/javase-jdk13-downloads.html" target="_blank" rel="noopener noreferrer">oracle 官网下载地址<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ol> <p><img src="/qa-docs/assets/img/jdk.4809b091.jpg" alt="jdk"></p> <ol start="2"><li>设置Java的环境变量</li></ol> <ul><li>步骤一：打开mac终端命令行工具，输入 “/usr/libexec/java_home -V” ，查找java安装路径，如下图：</li></ul> <p><img src="/qa-docs/assets/img/java-home.60a527cf.png" alt="config"></p> <ul><li>步骤二：复制java安装路径后，然后打开终端输入“ls -an”，查看“.bash_profile”文件是否存在，如果不存在，输入“touch .bash_profile”，如果存在就跳过这一步，直接输入 “open -e .bash_profile” ，在该文件下新增</li></ul> <div class="language-java extra-class"><pre class="language-java"><code>export JAVA_HOME<span class="token operator">=</span><span class="token operator">/</span><span class="token class-name">Library</span><span class="token operator">/</span><span class="token class-name">Java</span><span class="token operator">/</span><span class="token class-name">JavaVirtualMachines</span><span class="token operator">/</span>jdk1<span class="token punctuation">.</span><span class="token number">8.0_40</span><span class="token punctuation">.</span>jdk<span class="token operator">/</span><span class="token class-name">Contents</span><span class="token operator">/</span><span class="token class-name">Home</span>
export PATH<span class="token operator">=</span>$JAVA_HOME<span class="token operator">/</span>bin<span class="token operator">:</span>$PATH<span class="token operator">:</span><span class="token punctuation">.</span>
export CLASSPATH<span class="token operator">=</span>$JAVA_HOME<span class="token operator">/</span>lib<span class="token operator">/</span>tools<span class="token punctuation">.</span>jar<span class="token operator">:</span>$JAVA_HOME<span class="token operator">/</span>lib<span class="token operator">/</span>dt<span class="token punctuation">.</span>jar
</code></pre></div><ul><li>步骤三：保存文件之后，输入命令 “source ~/.bash_profile” ，让环境变量生效。</li> <li>步骤四：依次输入命令 “java -version” 和 “javac” 执行，检查 jdk是否安装成功。（不提示command not found 即安装成功）</li></ul> <p><strong>3.1.2  mac下搭建android-sdk</strong></p> <ul><li>步骤一：去官网下载，下载后解压到某个文件夹下–<a href="https://www.androiddevtools.cn/" target="_blank" rel="noopener noreferrer">Android SDK下载地址<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <p><img src="/qa-docs/assets/img/android-sdk.df035845.png" alt="jdk"></p> <ul><li>步骤二：解压后的文件夹下面找到tools，点击下面的android，打开Android SDK Manager。选择你想要下载的安装包，点击“install”下载安装。</li></ul> <p><img src="/qa-docs/assets/img/jdk-tool.29fd0e64.png" alt="config"></p> <ul><li>步骤三：复制android jdk安装路径后，然后打开终端输入“ls -an”，查看“.bash_profile”文件是否存在，如果不存在，输入“touch .bash_profile”，如果存在就跳过这一步，直接输入 “open -e .bash_profile” ，在该文件下新增</li></ul> <div class="language-java extra-class"><pre class="language-java"><code>export ANDROID_HOME<span class="token operator">=</span><span class="token operator">/</span><span class="token class-name">Users</span><span class="token operator">/</span>zhazha<span class="token operator">/</span><span class="token class-name">Downloads</span><span class="token operator">/</span>android<span class="token operator">-</span>sdk<span class="token operator">-</span>macosx
export PATH<span class="token operator">=</span>$PATH<span class="token operator">:</span>$ANDROID_HOME<span class="token operator">/</span>tools
export PATH<span class="token operator">=</span>$PATH<span class="token operator">:</span>$ANDROID_HOME<span class="token operator">/</span>platform<span class="token operator">-</span>tools
</code></pre></div><ul><li>步骤四：保存文件之后，输入命令 “source ~/.bash_profile” ，让环境变量生效。</li> <li>步骤五：依次输入命令 “adb” “android -v” “aapt” 执行，检查 jdk是否安装成功。</li></ul> <p><strong>3.1.3 mac安装homebrew / nodejs / appium客户端</strong></p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># 安装brew</span>
ruby -e <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token function">curl</span> -fsSL https://raw.github.com/mxcl/homebrew/go<span class="token variable">)</span></span>&quot;</span>
<span class="token comment"># 安装python3及相关包，这步是安装appium的客户端</span>
brew <span class="token function">install</span> python3
pip <span class="token function">install</span> selenium
pip <span class="token function">install</span> appium-python-client
<span class="token comment"># 安装nodejs</span>
brew <span class="token function">install</span> nodejs
<span class="token comment"># 配置cnpm</span>
<span class="token function">npm</span> <span class="token function">install</span> -g cnpm --registry<span class="token operator">=</span>https://registry.npm.taobao.org
<span class="token comment"># 安装appium（即安装appium的服务端），因为我安装了桌面版所以不安装Appium-Server了</span>
<span class="token comment"># sudo cnpm install appium -g</span>
</code></pre></div><p><strong>3.1.4 mac安装Appium桌面版</strong></p> <p><a href="https://github.com/appium/appium-desktop/releases/" target="_blank" rel="noopener noreferrer">appium desktop下载地址<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>下载好Appium-mac-1.15.1.dmg后，直接双击根据提示安装即可。</p> <p><strong>3.1.5 验证安装</strong></p> <p>要验证是否满足Appium的所有依赖关系，可以使用 appium-doctor。使用进行安装<code>sudo cnpm install appium-doctor -g</code>，然后运行 appium-doctor命令，提供--ios或--android标志以验证是否正确设置了所有依赖项。可能有一些依赖要自己安装，可以参考<a href="https://www.cnblogs.com/wuduoduo41/archive/2004/01/13/12411197.html" target="_blank" rel="noopener noreferrer">解决appium-doctor依赖问题<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><a href="https://github.com/justadudewhohacks/opencv4nodejs" target="_blank" rel="noopener noreferrer">opencv4nodejs安装<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="_3-2-windows平台基于python的appium环境搭建"><a href="#_3-2-windows平台基于python的appium环境搭建" class="header-anchor">#</a> 3.2 Windows平台基于Python的Appium环境搭建</h3> <p><a href="https://www.cnblogs.com/superhin/p/11454786.html" target="_blank" rel="noopener noreferrer">Appium环境搭建<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="二-连接android系统"><a href="#二-连接android系统" class="header-anchor">#</a> 二. 连接Android系统</h2> <h3 id="_2-1-将appium与android进行通信连接"><a href="#_2-1-将appium与android进行通信连接" class="header-anchor">#</a> 2.1 将Appium与Android进行通信连接</h3> <p>这段代码比较固定</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> appium <span class="token keyword">import</span> webdriver

<span class="token comment"># 设置Android系统信息,变量desired_caps是一个字典，字典的key是代表Appium与Android系统的连接参数，字典的value是Android系统信息。</span>
desired_caps <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token comment"># 需要被连接的操作系统，如iOS、Android或FirefoxOS。</span>
desired_caps<span class="token punctuation">[</span><span class="token string">'platformName'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'Android'</span>
<span class="token comment"># Android系统的当前版本信息，如本机的手机系统为9.0。</span>
desired_caps<span class="token punctuation">[</span><span class="token string">'platformVersion'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'9.0'</span>
<span class="token comment"># 需要执行自动化的Android应用的包名。</span>
desired_caps<span class="token punctuation">[</span><span class="token string">'appPackage'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'com.zhangyun.bravo'</span>
<span class="token comment"># Android应用包中启动的Android Activity名称。</span>
desired_caps<span class="token punctuation">[</span><span class="token string">'appActivity'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'com.zhangzhongyun.inovel.MainActivity'</span>
<span class="token comment"># 每台移动设备或模拟器的设备名，设备名是唯一的。</span>
desired_caps<span class="token punctuation">[</span><span class="token string">'deviceName'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'dd7a223e'</span>

<span class="token comment">#启动服务器地址，后面跟的是手机信息</span>
dirver <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Remote<span class="token punctuation">(</span><span class="token string">'http://0.0.0.0:4723/wd/hub'</span><span class="token punctuation">,</span> desired_caps<span class="token punctuation">)</span>
</code></pre></div><h4 id="_2-1-1-获取移动设备的设备名的方法"><a href="#_2-1-1-获取移动设备的设备名的方法" class="header-anchor">#</a> 2.1.1 获取移动设备的设备名的方法</h4> <ol><li>打开Android SDK所在的文件夹，找到tools文件夹里的uiautomatorviewer.bat文件并双击运行，该文件启动一个名为UI Automator Viewer的软件。</li></ol> <p><img src="/qa-docs/assets/img/uiautomator.44837024.png" alt="UI Automator Viewer"></p> <ol start="2"><li>在Android SDK的文件路径中找到AVD Manager.exe并双击运行，该exe程序可以启动Android模拟器。</li> <li>将手机连接到计算机，连接之前确保手机已开启USB调试模式，连接成功后，手机界面会出现一个USB调试提示信息，单击“确定”按钮即可。</li></ol> <p><img src="/qa-docs/assets/img/adapt.c402f9ac.jpeg" alt="USB调试提示信息"></p> <ol start="4"><li>在UI Automator Viewer的软件中，获取设置的设备名</li></ol> <p><img src="/qa-docs/assets/img/getDeviceName.8de4f5d7.jpeg" alt="获取设备名"></p> <h4 id="_2-1-2-获取apppackage的方法"><a href="#_2-1-2-获取apppackage的方法" class="header-anchor">#</a> 2.1.2 获取appPackage的方法</h4> <p>参数appPackage同样需要借助工具UI Automator Viewer获取，选中获取设备名的按钮，并且保持手机屏幕常亮，单击“OK”按钮，软件就会自动捕捉手机当前界面的控件信息。单击手机上的某个控件，该控件信息就会显示在右侧。其中参数package的参数值就是参数appPackage的参数值。</p> <p><img src="/qa-docs/assets/img/getAppPackage.dcba97b9.png" alt="获取appPackage"></p> <h4 id="_2-1-3-获取appactivity的方法"><a href="#_2-1-3-获取appactivity的方法" class="header-anchor">#</a> 2.1.3 获取appActivity的方法</h4> <p>打开CMD窗口并输入adb shell dumpsys activity activities指令来获取当前设备的程序运行信息。在这些信息中可以找出appActivity的参数值，比如查找bravonovel的AppActivity，com.zhangyun.bravo/com.zhangzhongyun.inovel.MainActivity，斜杠后面的内容com.zhangzhongyun.inovel.MainActivity就是参数appActivity的参数值。</p> <p><img src="/qa-docs/assets/img/getAppActivity.14f084f1.png" alt="获取appActivity"></p> <h4 id="_2-1-4-appium连接移动设备或模拟器的常用参数"><a href="#_2-1-4-appium连接移动设备或模拟器的常用参数" class="header-anchor">#</a> 2.1.4 Appium连接移动设备或模拟器的常用参数</h4> <p>参考这个文档<a href="http://appium.io/docs/cn/writing-running-appium/caps/" target="_blank" rel="noopener noreferrer">文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>https://www.cnblogs.com/du-hong/p/11003755.html</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次编辑时间:</span> <span class="time">2020/12/3 上午7:50:39</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/qa-docs/code/monkey.html" class="prev">
        Monkey文档
      </a></span> <span class="next"><a href="/qa-docs/code/python.html">
        Python 基础
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/qa-docs/assets/js/app.8d0fa31b.js" defer></script><script src="/qa-docs/assets/js/3.d8df636e.js" defer></script><script src="/qa-docs/assets/js/6.53acc426.js" defer></script>
  </body>
</html>
